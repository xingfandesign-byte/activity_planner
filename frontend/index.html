<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekend Planner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Loading State (shown until JS decides which screen) -->
        <div id="app-loading" class="app-loading">
            <div class="loading-content">
                <h1>ğŸ‰</h1>
                <p>Loading Weekend Planner...</p>
            </div>
        </div>
        
        <!-- Auth Screen (Login/Signup) - Only for returning users who need to sign in -->
        <div id="auth-screen" class="screen">
            <div class="container auth-container">
                <!-- Login Form -->
                <div id="login-form" class="auth-form active">
                    <h1>ğŸ‰ Weekend Planner</h1>
                    <p class="subtitle">Welcome back!</p>
                    
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="login-email" placeholder="hello@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password">
                    </div>
                    
                    <div class="checkbox-row">
                        <label><input type="checkbox" id="remember-me"> Remember me</label>
                        <a href="#" onclick="showForgotPassword()" class="forgot-link">Forgot password?</a>
                    </div>
                    
                    <button class="btn btn-primary" onclick="handleLogin()">Sign In</button>
                    
                    <div class="auth-divider">
                        <span>or sign in with</span>
                    </div>
                    
                    <div class="oauth-buttons">
                        <button class="btn btn-oauth" onclick="signInWithOAuth('google')">
                            <span class="oauth-icon">G</span> Google
                        </button>
                        <button class="btn btn-oauth" onclick="signInWithOAuth('apple')">
                            <span class="oauth-icon">ğŸ</span> Apple
                        </button>
                    </div>
                    
                    <p class="auth-switch">
                        Don't have an account? <a href="#" onclick="showSignupForm()">Sign up</a>
                    </p>
                    
                    <button class="btn-link" onclick="continueAsGuest()">Continue as guest</button>
                </div>
                
                <!-- Signup Form -->
                <div id="signup-form" class="auth-form">
                    <h1>ğŸ‰ Weekend Planner</h1>
                    <p class="subtitle">Get personalized weekend ideas</p>
                    
                    <div class="form-group">
                        <label>Email address</label>
                        <input type="email" id="signup-email" placeholder="hello@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label>Create a password</label>
                        <input type="password" id="signup-password" placeholder="At least 8 characters">
                        <p class="input-hint">âœ“ At least 8 characters</p>
                    </div>
                    
                    <div class="checkbox-row">
                        <label><input type="checkbox" id="email-digest-optin" checked> Send me weekly digest emails</label>
                    </div>
                    
                    <button class="btn btn-primary" onclick="handleSignup()">Create Account</button>
                    
                    <div class="auth-divider">
                        <span>or continue with</span>
                    </div>
                    
                    <div class="oauth-buttons">
                        <button class="btn btn-oauth" onclick="signInWithOAuth('google')">
                            <span class="oauth-icon">G</span> Google
                        </button>
                        <button class="btn btn-oauth" onclick="signInWithOAuth('apple')">
                            <span class="oauth-icon">ğŸ</span> Apple
                        </button>
                    </div>
                    
                    <p class="auth-switch">
                        Already have an account? <a href="#" onclick="showLoginForm()">Sign in</a>
                    </p>
                    
                    <p class="terms-text">
                        By continuing, you agree to our <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- First-Time Onboarding Screen -->
        <div id="onboarding" class="screen">
            <div class="container onboarding-container">
                <!-- Progress Indicator -->
                <div class="progress-bar">
                    <div class="progress-step active" data-step="1">1</div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="2">2</div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="3">3</div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="4">4</div>
                    <div class="progress-line"></div>
                    <div class="progress-step" data-step="5">5</div>
                </div>

                <!-- Step 1: Group Type -->
                <div id="step-1" class="onboarding-step active" style="display: block;">
                    <h2>Who are you planning weekends for?</h2>
                    <p class="subtitle">This helps us personalize your recommendations</p>
                    
                    <div class="selection-grid">
                        <div class="selection-card" data-value="solo">
                            <div class="card-emoji">ğŸ‘¤</div>
                            <div class="card-label">Just Me</div>
                        </div>
                        <div class="selection-card" data-value="couple">
                            <div class="card-emoji">ğŸ‘«</div>
                            <div class="card-label">With Partner</div>
                        </div>
                        <div class="selection-card" data-value="family">
                            <div class="card-emoji">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                            <div class="card-label">Family with Kids</div>
                        </div>
                        <div class="selection-card" data-value="friends">
                            <div class="card-emoji">ğŸ‘¥</div>
                            <div class="card-label">With Friends</div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Location -->
                <div id="step-2" class="onboarding-step">
                    <div id="step-2a" class="substep active" style="display: block;">
                        <h2>Where are you based?</h2>
                        <p class="subtitle">We'll use this to calculate travel times</p>
                        
                        <button id="use-location-btn" class="btn btn-location">
                            <span class="btn-icon">ğŸ“</span>
                            <span class="btn-text">Use My Current Location</span>
                            <span class="btn-subtext">For accurate travel times</span>
                        </button>
                        
                        <button id="manual-location-btn" class="btn-link">No thanks, I'll enter manually</button>
                    </div>
                    
                    <div id="step-2b" class="substep">
                        <h2>How would you like to enter your location?</h2>
                        
                        <div class="selection-grid two-col">
                            <div class="selection-card" data-value="zip" id="select-zip">
                                <div class="card-emoji">ğŸ </div>
                                <div class="card-label">ZIP Code</div>
                                <div class="card-sublabel">(faster entry)</div>
                            </div>
                            <div class="selection-card" data-value="address" id="select-address">
                                <div class="card-emoji">ğŸ“</div>
                                <div class="card-label">Full Address</div>
                                <div class="card-sublabel">(exact times) âœ“</div>
                            </div>
                        </div>
                        
                        <div id="zip-input-group" class="input-group hidden">
                            <label>Enter your ZIP code:</label>
                            <input type="text" id="zip-input" placeholder="94102" maxlength="10">
                            <p class="privacy-note">ğŸ”’ We only use this for travel times</p>
                            <button class="btn btn-primary" onclick="submitLocation('zip')">Continue â†’</button>
                        </div>
                        
                        <div id="address-input-group" class="input-group hidden">
                            <label>Enter your address:</label>
                            <input type="text" id="address-input" placeholder="123 Main St, San Francisco, CA">
                            <p class="privacy-note">ğŸ”’ We only use this for travel times</p>
                            <button class="btn btn-primary" onclick="submitLocation('address')">Continue â†’</button>
                        </div>
                        
                        <button class="btn-link" onclick="showSubstep('2a')">â† Back</button>
                    </div>
                    
                    <div id="step-2c" class="substep">
                        <h2>âœ“ Location set!</h2>
                        <p class="location-display" id="location-display">ğŸ“ San Francisco, CA 94102</p>
                        
                        <div class="checkbox-single">
                            <label>
                                <input type="checkbox" id="save-location-checkbox">
                                <span>Save as my home location</span>
                                <span class="checkbox-sublabel">(skip this step next time)</span>
                            </label>
                        </div>
                        
                        <button class="btn btn-primary" onclick="completeLocationStep()">Continue â†’</button>
                    </div>
                    
                    <div id="step-2d" class="substep">
                        <h2>Travel Preferences</h2>
                        
                        <div class="form-section">
                            <label>How do you get around? (select all)</label>
                            <div class="selection-grid three-col">
                                <div class="selection-card small selectable" data-value="walking">
                                    <div class="card-emoji">ğŸš¶</div>
                                    <div class="card-label">Walking/Biking</div>
                                </div>
                                <div class="selection-card small selectable selected" data-value="transit">
                                    <div class="card-emoji">ğŸš‡</div>
                                    <div class="card-label">Transit</div>
                                </div>
                                <div class="selection-card small selectable selected" data-value="car">
                                    <div class="card-emoji">ğŸš—</div>
                                    <div class="card-label">Car</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <label>Typical departure times (select all)</label>
                            <p class="section-sublabel">Saturday:</p>
                            <div class="selection-grid three-col">
                                <div class="selection-card small selectable selected" data-day="saturday" data-value="morning">
                                    <div class="card-label">Morning</div>
                                    <div class="card-sublabel">8-10 AM</div>
                                </div>
                                <div class="selection-card small selectable" data-day="saturday" data-value="midday">
                                    <div class="card-label">Midday</div>
                                    <div class="card-sublabel">11-1 PM</div>
                                </div>
                                <div class="selection-card small selectable" data-day="saturday" data-value="afternoon">
                                    <div class="card-label">Afternoon</div>
                                    <div class="card-sublabel">2-5 PM</div>
                                </div>
                            </div>
                            <p class="section-sublabel">Sunday:</p>
                            <div class="selection-grid three-col">
                                <div class="selection-card small selectable selected" data-day="sunday" data-value="morning">
                                    <div class="card-label">Morning</div>
                                    <div class="card-sublabel">8-10 AM</div>
                                </div>
                                <div class="selection-card small selectable" data-day="sunday" data-value="midday">
                                    <div class="card-label">Midday</div>
                                    <div class="card-sublabel">11-1 PM</div>
                                </div>
                                <div class="selection-card small selectable" data-day="sunday" data-value="afternoon">
                                    <div class="card-label">Afternoon</div>
                                    <div class="card-sublabel">2-5 PM</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <label>Max travel time (select all that apply)</label>
                            <div class="selection-grid four-col">
                                <div class="selection-card small selectable selected" data-value="0-15">
                                    <div class="card-label">&lt; 15 min</div>
                                    <div class="card-sublabel">nearby</div>
                                </div>
                                <div class="selection-card small selectable selected" data-value="15-30">
                                    <div class="card-label">15-30 min</div>
                                    <div class="card-sublabel">moderate</div>
                                </div>
                                <div class="selection-card small selectable" data-value="30-60">
                                    <div class="card-label">30-60 min</div>
                                    <div class="card-sublabel">worth it</div>
                                </div>
                                <div class="selection-card small selectable" data-value="60+">
                                    <div class="card-label">60+ min</div>
                                    <div class="card-sublabel">day trip</div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-primary" onclick="goToStep(3)">Continue â†’</button>
                    </div>
                </div>

                <!-- Step 3: Interests -->
                <div id="step-3" class="onboarding-step">
                    <h2>What do you enjoy?</h2>
                    <p class="subtitle">Pick at least 3</p>
                    
                    <div class="selection-grid three-col" id="interests-grid">
                        <div class="selection-card selectable" data-value="nature">
                            <div class="card-emoji">ğŸŒ²ğŸ•ï¸</div>
                            <div class="card-label">Nature & Parks</div>
                        </div>
                        <div class="selection-card selectable" data-value="arts_culture">
                            <div class="card-emoji">ğŸ¨ğŸ–¼ï¸</div>
                            <div class="card-label">Arts & Culture</div>
                        </div>
                        <div class="selection-card selectable" data-value="food_drinks">
                            <div class="card-emoji">ğŸ½ï¸ğŸ·</div>
                            <div class="card-label">Food & Drinks</div>
                        </div>
                        <div class="selection-card selectable" data-value="adventure">
                            <div class="card-emoji">ğŸ¢ğŸ¯</div>
                            <div class="card-label">Adventure & Sports</div>
                        </div>
                        <div class="selection-card selectable" data-value="learning">
                            <div class="card-emoji">ğŸ“šğŸ”¬</div>
                            <div class="card-label">Learning & Science</div>
                        </div>
                        <div class="selection-card selectable" data-value="entertainment">
                            <div class="card-emoji">ğŸµğŸ­</div>
                            <div class="card-label">Entertainment</div>
                        </div>
                        <div class="selection-card selectable" data-value="relaxation">
                            <div class="card-emoji">ğŸ§˜â˜•</div>
                            <div class="card-label">Relaxation</div>
                        </div>
                        <div class="selection-card selectable" data-value="shopping">
                            <div class="card-emoji">ğŸ›ï¸ğŸª</div>
                            <div class="card-label">Shopping & Markets</div>
                        </div>
                        <div class="selection-card selectable" data-value="events">
                            <div class="card-emoji">ğŸªğŸ </div>
                            <div class="card-label">Local Events</div>
                        </div>
                    </div>
                    
                    <p class="selection-count" id="interests-count">0 selected (minimum 3)</p>
                    
                    <button class="btn btn-primary" id="step3-continue" disabled onclick="goToStep(4)">Continue â†’</button>
                    <button class="btn-link" onclick="goToStep(2)">â† Back</button>
                </div>

                <!-- Step 4: Activity Style -->
                <div id="step-4" class="onboarding-step">
                    <h2>What's your ideal weekend vibe?</h2>
                    
                    <div class="form-section">
                        <label>Energy Level:</label>
                        <div class="selection-grid three-col">
                            <div class="selection-card selectable" data-group="energy" data-value="relaxing">
                                <div class="card-emoji">ğŸ§˜</div>
                                <div class="card-label">Relaxing</div>
                                <div class="card-sublabel">sit, view, chill</div>
                            </div>
                            <div class="selection-card selectable selected" data-group="energy" data-value="moderate">
                                <div class="card-emoji">ğŸš¶</div>
                                <div class="card-label">Moderate</div>
                                <div class="card-sublabel">walking, exploring</div>
                            </div>
                            <div class="selection-card selectable" data-group="energy" data-value="active">
                                <div class="card-emoji">ğŸƒ</div>
                                <div class="card-label">Active</div>
                                <div class="card-sublabel">adventure, sports</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label>How much time per activity?</label>
                        <div class="selection-grid three-col">
                            <div class="selection-card selectable" data-group="time" data-value="quick">
                                <div class="card-label">1-2 hours</div>
                                <div class="card-sublabel">Quick trip</div>
                            </div>
                            <div class="selection-card selectable selected" data-group="time" data-value="half_day">
                                <div class="card-label">3-4 hours</div>
                                <div class="card-sublabel">Half-day</div>
                            </div>
                            <div class="selection-card selectable" data-group="time" data-value="full_day">
                                <div class="card-label">5+ hours</div>
                                <div class="card-sublabel">Full day</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="goToStep(5)">Continue â†’</button>
                    <button class="btn-link" onclick="goToStep(3)">â† Back</button>
                </div>

                <!-- Step 5: Constraints (Optional) -->
                <div id="step-5" class="onboarding-step">
                    <h2>A few more details</h2>
                    <p class="subtitle">Optional - you can skip this</p>
                    
                    <div class="form-section">
                        <label>Budget per outing:</label>
                        <div class="selection-grid four-col">
                            <div class="selection-card small selectable" data-group="budget" data-value="free">
                                <div class="card-label">Free</div>
                                <div class="card-sublabel">only</div>
                            </div>
                            <div class="selection-card small selectable" data-group="budget" data-value="low">
                                <div class="card-label">&lt; $25</div>
                                <div class="card-sublabel">per person</div>
                            </div>
                            <div class="selection-card small selectable selected" data-group="budget" data-value="moderate">
                                <div class="card-label">&lt; $50</div>
                                <div class="card-sublabel">per person</div>
                            </div>
                            <div class="selection-card small selectable" data-group="budget" data-value="any">
                                <div class="card-label">No limit</div>
                                <div class="card-sublabel"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label>Accessibility needs:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="accessibility" value="wheelchair"> Wheelchair accessible</label>
                            <label><input type="checkbox" name="accessibility" value="stroller"> Stroller friendly</label>
                            <label><input type="checkbox" name="accessibility" value="limited_walking"> Limited walking</label>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <label>Prefer to avoid:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="avoid" value="crowds"> Crowded places</label>
                            <label><input type="checkbox" name="avoid" value="tourist"> Tourist spots</label>
                            <label><input type="checkbox" name="avoid" value="reservations"> Requires reservations</label>
                            <label><input type="checkbox" name="avoid" value="waits"> Long wait times</label>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="completeOnboarding()">ğŸ‰ Show My Recommendations</button>
                    <button class="btn-link" onclick="goToStep(4)">â† Back</button>
                    <button class="btn-link" onclick="skipAndComplete()">Skip & use defaults</button>
                </div>
                
                <!-- Sign in / Sign up link for existing users -->
                <p class="onboarding-auth-link">
                    Already have an account? <a href="#" onclick="showAuthFromOnboarding('login')">Sign in</a> Â· 
                    Want to register? <a href="#" onclick="showAuthFromOnboarding('signup')">Sign up</a>
                </p>
            </div>
        </div>

        <!-- Returning User Dashboard -->
        <div id="dashboard" class="screen">
            <div class="container dashboard-container">
                <header class="dashboard-header">
                    <h1>Weekend Planner</h1>
                    <div class="header-actions">
                        <button id="settings-btn" class="btn btn-secondary" onclick="openSettings()">âš™ï¸ Settings</button>
                        <button id="signout-btn" class="btn btn-secondary" onclick="handleSignOut()">Sign Out</button>
                    </div>
                </header>
                
                <div class="welcome-banner">
                    <h2>Welcome back, <span id="user-name">there</span>! ğŸ‘‹</h2>
                    <p>Here's what's happening this weekend.</p>
                </div>
                
                <!-- Quick Adjustments - Now at the top -->
                <div class="quick-adjustments">
                    <h3>ğŸ¯ Quick Adjustments for This Weekend</h3>
                    <p class="quick-adjustments-note">These are temporary - your saved preferences won't change</p>
                    
                    <div class="quick-row">
                        <div class="form-group">
                            <label>Location</label>
                            <select id="quick-location" onchange="onQuickAdjustmentChange()">
                                <option value="">ğŸ“ Use saved location</option>
                                <option value="current">ğŸ“ Use current location</option>
                                <option value="custom">âœï¸ Enter new location...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Planning for</label>
                            <div class="quick-toggle-group">
                                <button class="quick-toggle" data-value="solo" onclick="selectQuickGroup(this)">ğŸ‘¤</button>
                                <button class="quick-toggle" data-value="couple" onclick="selectQuickGroup(this)">ğŸ‘«</button>
                                <button class="quick-toggle active" data-value="family" onclick="selectQuickGroup(this)">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</button>
                                <button class="quick-toggle" data-value="friends" onclick="selectQuickGroup(this)">ğŸ‘¥</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Max travel time</label>
                        <div class="quick-toggle-group travel-time-toggles">
                            <button class="quick-toggle active" data-value="0-15" onclick="toggleQuickTravelTime(this)">&lt; 15 min</button>
                            <button class="quick-toggle active" data-value="15-30" onclick="toggleQuickTravelTime(this)">15-30 min</button>
                            <button class="quick-toggle" data-value="30-60" onclick="toggleQuickTravelTime(this)">30-60 min</button>
                            <button class="quick-toggle" data-value="60+" onclick="toggleQuickTravelTime(this)">60+ day trip</button>
                        </div>
                    </div>
                </div>
                
                <!-- Recommendations Section -->
                <div class="dashboard-recommendations">
                    <div class="section-header">
                        <h3>ğŸ‰ This Weekend's Recommendations</h3>
                        <button class="btn-link" onclick="refreshRecommendations()">â†» Refresh</button>
                    </div>
                    <div id="dashboard-digest-items" class="digest-grid">
                        <div class="loading" id="dashboard-loading">Loading recommendations...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Settings Modal -->
        <div id="settings-modal" class="modal">
            <div class="modal-content modal-large">
                <span class="close" onclick="closeSettings()">&times;</span>
                <h2>âš™ï¸ Settings</h2>
                
                <div class="settings-tabs">
                    <button class="settings-tab active" onclick="showSettingsTab('preferences')">Saved Preferences</button>
                    <button class="settings-tab" onclick="showSettingsTab('account')">Account</button>
                    <button class="settings-tab" onclick="showSettingsTab('notifications')">Notifications</button>
                </div>
                
                <!-- Preferences Tab -->
                <div id="settings-preferences" class="settings-tab-content active">
                    <div class="preferences-summary">
                        <!-- Location -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon">ğŸ“</span>
                                <span class="pref-title">Home Location</span>
                                <button class="btn-edit" onclick="editPreference('location')">Edit</button>
                            </div>
                            <div class="pref-card-content">
                                <p id="pref-location">San Francisco, CA 94102</p>
                                <p class="pref-sublabel">Used as default starting point</p>
                            </div>
                        </div>
                        
                        <!-- Planning For -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon" id="pref-group-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
                                <span class="pref-title">Default Planning For</span>
                                <button class="btn-edit" onclick="editPreference('group')">Edit</button>
                            </div>
                            <div class="pref-card-content">
                                <p id="pref-group">Family with Kids</p>
                            </div>
                        </div>
                        
                        <!-- Travel Preferences -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon">ğŸš—</span>
                                <span class="pref-title">Travel Preferences</span>
                                <button class="btn-edit" onclick="editPreference('travel')">Edit</button>
                            </div>
                            <div class="pref-card-content">
                                <p><strong>Transportation:</strong> <span id="pref-transport">Car, Transit</span></p>
                                <p><strong>Max travel time:</strong> <span id="pref-travel-time">15-30 min</span></p>
                                <p><strong>Departure:</strong> <span id="pref-departure">Saturday morning, Sunday morning</span></p>
                            </div>
                        </div>
                        
                        <!-- Interests -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon">ğŸ¯</span>
                                <span class="pref-title">Interests</span>
                                <button class="btn-edit" onclick="editPreference('interests')">Edit</button>
                            </div>
                            <div class="pref-card-content">
                                <div class="interest-tags" id="pref-interests">
                                    <span class="tag">ğŸŒ² Nature & Parks</span>
                                    <span class="tag">ğŸ¨ Arts & Culture</span>
                                    <span class="tag">ğŸ½ï¸ Food & Drinks</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ideal Vibe -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon">ğŸ§˜</span>
                                <span class="pref-title">Ideal Vibe</span>
                                <button class="btn-edit" onclick="editPreference('vibe')">Edit</button>
                            </div>
                            <div class="pref-card-content">
                                <p><strong>Energy:</strong> <span id="pref-energy">Moderate (walking, exploring)</span></p>
                                <p><strong>Time:</strong> <span id="pref-time-commit">Half-day (3-4 hours)</span></p>
                                <p><strong>Budget:</strong> <span id="pref-budget">Under $50 per person</span></p>
                            </div>
                        </div>
                        
                        <!-- Other Preferences -->
                        <div class="pref-card">
                            <div class="pref-card-header">
                                <span class="pref-icon">âš™ï¸</span>
                                <span class="pref-title">Other Preferences</span>
                                <button class="btn-edit" onclick="editPreference('other')">Edit</button>
                            </div>
                            <div class="pref-card-content" id="pref-other">
                                <p>âœ“ Kid-friendly activities</p>
                                <p>âœ“ Stroller friendly</p>
                                <p>Avoiding: Crowds, Long waits</p>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="editAllPreferences()">Redo Full Onboarding</button>
                </div>
                
                <!-- Account Tab -->
                <div id="settings-account" class="settings-tab-content">
                    <div class="pref-card">
                        <div class="pref-card-header">
                            <span class="pref-icon">ğŸ‘¤</span>
                            <span class="pref-title">Account Info</span>
                        </div>
                        <div class="pref-card-content">
                            <p><strong>Email:</strong> <span id="account-email">user@example.com</span></p>
                            <p><strong>Member since:</strong> <span id="account-since">January 2026</span></p>
                        </div>
                    </div>
                    
                    <div class="pref-card">
                        <div class="pref-card-header">
                            <span class="pref-icon">ğŸ”’</span>
                            <span class="pref-title">Security</span>
                        </div>
                        <div class="pref-card-content">
                            <button class="btn btn-secondary" onclick="changePassword()">Change Password</button>
                        </div>
                    </div>
                    
                    <div class="pref-card danger">
                        <div class="pref-card-header">
                            <span class="pref-icon">âš ï¸</span>
                            <span class="pref-title">Danger Zone</span>
                        </div>
                        <div class="pref-card-content">
                            <button class="btn btn-danger" onclick="deleteAccount()">Delete Account</button>
                            <p class="pref-sublabel">This action cannot be undone</p>
                        </div>
                    </div>
                </div>
                
                <!-- Notifications Tab -->
                <div id="settings-notifications" class="settings-tab-content">
                    <div class="pref-card">
                        <div class="pref-card-header">
                            <span class="pref-icon">ğŸ“§</span>
                            <span class="pref-title">Email Notifications</span>
                        </div>
                        <div class="pref-card-content">
                            <label class="toggle-label">
                                <input type="checkbox" id="notif-weekly" checked>
                                <span>Weekly weekend digest</span>
                            </label>
                            <label class="toggle-label">
                                <input type="checkbox" id="notif-events">
                                <span>Special events near me</span>
                            </label>
                            <label class="toggle-label">
                                <input type="checkbox" id="notif-deals">
                                <span>Deals and promotions</span>
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="saveNotificationSettings()">Save Preferences</button>
                </div>
            </div>
        </div>
        
        <!-- Full Screen Planner (optional expanded view) -->
        <div id="planner" class="screen">
            <div class="container">
                <header>
                    <h1>Weekend Planner</h1>
                    <div class="header-actions">
                        <button id="back-to-dashboard" class="btn btn-secondary" onclick="showDashboard()">â† Dashboard</button>
                        <button id="refresh-btn" class="btn btn-secondary" onclick="loadDigest()">â†» Refresh</button>
                    </div>
                </header>
                
                <div id="digest-container">
                    <div class="loading" id="loading">Loading weekend ideas...</div>
                    <div id="digest-items" class="digest-grid"></div>
                </div>
            </div>
        </div>
        
        <!-- Edit Preference Modal -->
        <div id="edit-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeEditModal()">&times;</span>
                <h2 id="edit-modal-title">Edit Preference</h2>
                <div id="edit-modal-content"></div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="savePreferenceEdit()">Save Changes</button>
                </div>
            </div>
        </div>
        
        <!-- Recommendation Detail Modal -->
        <div id="detail-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="detail-content"></div>
            </div>
        </div>
        
        <!-- Signup Prompt Modal (after onboarding) -->
        <div id="signup-prompt-modal" class="modal">
            <div class="modal-content signup-prompt">
                <h2>ğŸ‰ You're all set!</h2>
                <p class="prompt-subtitle">Want to save your preferences for next time?</p>
                
                <div class="prompt-benefits">
                    <div class="benefit-item">
                        <span class="benefit-icon">ğŸ’¾</span>
                        <span>Save your preferences</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">ğŸ“§</span>
                        <span>Get weekly weekend ideas</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">âš¡</span>
                        <span>Faster recommendations next time</span>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="signupFromPrompt()">Create Free Account</button>
                <button class="btn-link" onclick="skipSignupAndContinue()">Skip for now â€” show me recommendations</button>
            </div>
        </div>
    </div>
    
    <script src="app.js"></script>
</body>
</html>
